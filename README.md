Разберу каждый пункт по порядку — что должно происходить и как это работает:

## 1. Парсинг
**Что делает:** Автоматически собирает объявления с сайтов недвижимости
**Как работает:**
- Настраиваешь источники (URL сайта + раздел, например "продажа квартир")
- Парсер заходит на страницы, извлекает данные: заголовок, описание, цену, фото, контакты, геолокацию
- Работает с защитой: меняет User-Agent, делает паузы, может использовать прокси
- Сохраняет всё в базу с пометкой источника и времени сбора

## 2. Обработка дубликатов
**Что делает:** Находит одинаковые объявления, даже если они оформлены по-разному
**Как работает:**
- Сравнивает фото через хэши (одинаковые фото = скорее всего дубль)
- Анализирует тексты с помощью NLP (похожие описания)
- Проверяет совпадения телефонов и адресов
- Даже если описания разные, но фото и контакты совпадают — это дубль

## 3. Кластеризация объявлений
**Что делает:** Создаёт одно "главное" объявление из группы дублей
**Как работает:**
- Берёт все найденные дубли
- Создаёт единое объявление, собирая лучшие данные из всех источников
- Если в одном дубле есть точный адрес, а в другом — цена за м², объединяет это
- Показывает, сколько дублей и откуда они

## 4. Определение риэлторов
**Что делает:** Автоматически помечает профессиональных продавцов
**Как работает:**
- Считает, сколько объявлений у одного телефона/email
- Если больше лимита (например, 5 объявлений) — помечает как риэлтора
- Можно фильтровать: показать только от собственников или только от риэлторов

## 5. API-методы
**Что делает:** Предоставляет данные для фронтенда или других систем
**Как работает:**
- `/ads/unique` — список всех уникальных объявлений с фильтрами
- `/ads/{id}` — детали конкретного объявления + все его дубли
- `/ads/{id}/sources` — откуда взяты данные
- Фильтры: район, тип недвижимости, риэлтор/собственник, цена

## 6. Архитектура
**Что используется:**
- **Backend:** Django/FastAPI для API
- **Парсинг:** Scrapy для сбора данных
- **Сравнение:** библиотеки для анализа изображений и текстов
- **База:** PostgreSQL для хранения
- **Поиск:** Elasticsearch для быстрых фильтров

## Итоговый результат
Получается база уникальных объявлений, где:
- Нет дублей
- Собрана максимально полная информация
- Видно, сколько и откуда дублей
- Можно фильтровать по любым параметрам
- Автоматически обновляется

По сути, это агрегатор недвижимости, который умнее обычных досок объявлений — он понимает, что одна и та же квартира может быть размещена в 10 местах разными способами.